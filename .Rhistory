str_split(pattern = "\n") %>%
map(~na_if(.," "))
subject_proceedings = html %>%
html_elements(xpath = "/html/body/form/div[3]/table/tbody/tr[3]/td/div/table/tbody/tr[22]/td[2]") %>%
html_text2() %>%
str_split(pattern = "\n") %>%
map(~na_if(.," "))
# concerned_constitutional_acts = html %>%
#   html_elements(xpath = "/html/body/form/div[3]/table/tbody/tr[3]/td/div/table/tbody/tr[19]/td[2]/ul") %>%
#   html_text2() %>%
#   str_split(pattern = "\n") %>%
#   map(~na_if(.," "))
#
# concerned_acts = html %>%
#   html_elements(xpath = "/html/body/form/div[3]/table/tbody/tr[3]/td/div/table/tbody/tr[20]/td[2]/ul") %>%
#   html_text2() %>%
#   str_split(pattern = "\n") %>%
#   map(~na_if(.," "))
#
# disputed_act = html %>%
#   html_elements(xpath = "/html/body/form/div[3]/table/tbody/tr[3]/td/div/table/tbody/tr[17]/td[2]") %>%
#   html_text2() %>%
#   str_split(pattern = "\n") %>%
#   map(~na_if(.," "))
output$`Spisová značka` = case_id
output$`Odlišné stanovisko` = dissenting_judges
output$Navrhovatel = applicant
output$`Dotčený orgán` = concerned_body
output$`Věcný rejstřík` = field_register
output$`Předmět řízení` = subject_proceedings
# output$`Dotčené ústavní zákony a mezinárodní smlouvy` = concerned_constitutional_acts
# output$`Ostatní dotčené předpisy` = concerned_acts
# output$`Napadený akt` = disputed_act
#
pb$tick()
return(output)
} %>%
select(-c(2,4,5,10,24)) %>%
rename(
doc_id = "Identifikátor evropské judikatury",
case_id = "Spisová značka",
popular_name = "Populární název",
date_decision = "Datum rozhodnutí",
date_submission = "Datum podání",
date_publication = "Datum vyhlášení",
type_decision = "Forma rozhodnutí",
type_proceedings = "Typ řízení",
importance = "Význam",
applicant = "Navrhovatel",
concerned_body = "Dotčený orgán",
judge_rapporteur_name = "Soudce zpravodaj",
disputed_act = "Napadený akt",
type_verdict = "Typ výroku",
concerned_constitutional_acts = "Dotčené ústavní zákony a mezinárodní smlouvy",
concerned_acts = "Ostatní dotčené předpisy",
dissenting_opinion = "Odlišné stanovisko",
subject_proceedings = "Předmět řízení",
field_register = "Věcný rejstřík",
note = "Poznámka",
url_address = "URL adresa"
) %>%
mutate(across(contains("date"), ~ as.Date(x = ., format = "%d. %m. %Y"))) %>%
mutate(formation = case_when(
grepl(":Pl." , doc_id) ~ "Plenum",
grepl(":1.US.", doc_id) ~ "First Chamber",
grepl(":2.US.", doc_id) ~ "Second Chamber",
grepl(":3.US.", doc_id) ~ "Third Chamber",
grepl(":4.US.", doc_id) ~ "Fourth Chamber"
),
length_proceeding = interval(date_submission, date_decision) %>% as.numeric('days'),
outcome = ifelse(grepl("vyhověno", type_verdict), "granted", "rejected"),
judge_rapporteur_name = paste0(word(judge_rapporteur_name, 2), " ", word(judge_rapporteur_name, 1)),
doc_id = make.unique(doc_id),
dissenting_opinion = map(.x = dissenting_opinion, ~na_if(.x, "NA NA"))) %>%
remove_rownames() %>%
mutate(across(where(is.character), str_squish)) %>%
mutate(across(where(is.character), ~replace(., . == "NA", NA))) %>%
mutate(across(where(is.character), ~na_if(.,""))) %>%
left_join(., read_rds(file = "../data/US_judges.rds") %>% select(judge_name, judge_id), by = join_by(judge_rapporteur_name == judge_name)) %>%
rename(judge_rapporteur_id = judge_id) %>%
relocate(judge_rapporteur_id, .after = judge_rapporteur_name)
remDr$close()
rD[["server"]]$stop()
return(metadata)
message("Done with scraping metadata")
}
metadata_new = get_metadata(US_IDs_new[150:200])
View(metadata_new)
View(metadata_new)
get_metadata = function(decision_addresses){
rD = rsDriver(browser="firefox", port=as.integer(sample(x = 3000:5000, 1)), verbose=F, chromever = NULL)
remDr = rD[["client"]]
message("Scraping metadata")
pb = progress_bar$new(
format = "scraping metadata [:bar] :percent eta: :eta",
total = length(decision_addresses), clear = FALSE, width= 60)
metadata = foreach(i = seq_along(decision_addresses), .combine = "bind_rows", .errorhandling = "remove") %do% {
remDr$navigate(decision_addresses[i] %>%
str_extract("id=[0-9]+") %>%
paste0("https://nalus.usoud.cz/Search/ResultDetail.aspx?", .))
html = remDr$getPageSource()[[1]] %>%
read_html()
html_metadata = html %>%
html_nodes(".recordCardTable") %>%
html_table()
output = html_metadata[[1]]$X2 %>% t() %>% as_tibble()
colnames(output) = html_metadata[[1]]$X1
case_id = html %>%
html_elements(xpath = "/html/body/form/div[3]/table/tbody/tr[1]/td/table/tbody/tr[6]/td/table/tbody/tr[2]/td/table/tbody/tr[2]/td[2]") %>%
html_text2()
dissenting_judges = html %>%
html_elements(xpath = "/html/body/form/div[3]/table/tbody/tr[3]/td/div/table/tbody/tr[21]/td[2]") %>%
html_text2() %>%
str_split(pattern = "\n") %>%
map(~na_if(.," ")) %>%
map(.x = ., function(x) paste(word(x, 2), paste(word(x, 1), sep = "\\s")))
applicant = html %>%
html_elements(xpath = "/html/body/form/div[3]/table/tbody/tr[3]/td/div/table/tbody/tr[14]/td[2]") %>%
html_text2() %>%
str_split(pattern = "\n") %>%
map(~na_if(.," "))
concerned_body = html %>%
html_elements(xpath = "/html/body/form/div[3]/table/tbody/tr[3]/td/div/table/tbody/tr[15]/td[2]") %>%
html_text2() %>%
str_split(pattern = "\n") %>%
map(~na_if(.," "))
field_register = html %>%
html_elements(xpath = "/html/body/form/div[3]/table/tbody/tr[3]/td/div/table/tbody/tr[23]/td[2]") %>%
html_text2() %>%
str_split(pattern = "\n") %>%
map(~na_if(.," "))
subject_proceedings = html %>%
html_elements(xpath = "/html/body/form/div[3]/table/tbody/tr[3]/td/div/table/tbody/tr[22]/td[2]") %>%
html_text2() %>%
str_split(pattern = "\n") %>%
map(~na_if(.," "))
concerned_constitutional_acts = html %>%
html_elements(xpath = "/html/body/form/div[3]/table/tbody/tr[3]/td/div/table/tbody/tr[19]/td[2]/ul") %>%
html_text2() %>%
str_split(pattern = "\n") %>%
map(~na_if(.," "))
# concerned_acts = html %>%
#   html_elements(xpath = "/html/body/form/div[3]/table/tbody/tr[3]/td/div/table/tbody/tr[20]/td[2]/ul") %>%
#   html_text2() %>%
#   str_split(pattern = "\n") %>%
#   map(~na_if(.," "))
#
# disputed_act = html %>%
#   html_elements(xpath = "/html/body/form/div[3]/table/tbody/tr[3]/td/div/table/tbody/tr[17]/td[2]") %>%
#   html_text2() %>%
#   str_split(pattern = "\n") %>%
#   map(~na_if(.," "))
output$`Spisová značka` = case_id
output$`Odlišné stanovisko` = dissenting_judges
output$Navrhovatel = applicant
output$`Dotčený orgán` = concerned_body
output$`Věcný rejstřík` = field_register
output$`Předmět řízení` = subject_proceedings
output$`Dotčené ústavní zákony a mezinárodní smlouvy` = concerned_constitutional_acts
# output$`Ostatní dotčené předpisy` = concerned_acts
# output$`Napadený akt` = disputed_act
#
pb$tick()
return(output)
} %>%
select(-c(2,4,5,10,24)) %>%
rename(
doc_id = "Identifikátor evropské judikatury",
case_id = "Spisová značka",
popular_name = "Populární název",
date_decision = "Datum rozhodnutí",
date_submission = "Datum podání",
date_publication = "Datum vyhlášení",
type_decision = "Forma rozhodnutí",
type_proceedings = "Typ řízení",
importance = "Význam",
applicant = "Navrhovatel",
concerned_body = "Dotčený orgán",
judge_rapporteur_name = "Soudce zpravodaj",
disputed_act = "Napadený akt",
type_verdict = "Typ výroku",
concerned_constitutional_acts = "Dotčené ústavní zákony a mezinárodní smlouvy",
concerned_acts = "Ostatní dotčené předpisy",
dissenting_opinion = "Odlišné stanovisko",
subject_proceedings = "Předmět řízení",
field_register = "Věcný rejstřík",
note = "Poznámka",
url_address = "URL adresa"
) %>%
mutate(across(contains("date"), ~ as.Date(x = ., format = "%d. %m. %Y"))) %>%
mutate(formation = case_when(
grepl(":Pl." , doc_id) ~ "Plenum",
grepl(":1.US.", doc_id) ~ "First Chamber",
grepl(":2.US.", doc_id) ~ "Second Chamber",
grepl(":3.US.", doc_id) ~ "Third Chamber",
grepl(":4.US.", doc_id) ~ "Fourth Chamber"
),
length_proceeding = interval(date_submission, date_decision) %>% as.numeric('days'),
outcome = ifelse(grepl("vyhověno", type_verdict), "granted", "rejected"),
judge_rapporteur_name = paste0(word(judge_rapporteur_name, 2), " ", word(judge_rapporteur_name, 1)),
doc_id = make.unique(doc_id),
dissenting_opinion = map(.x = dissenting_opinion, ~na_if(.x, "NA NA"))) %>%
remove_rownames() %>%
mutate(across(where(is.character), str_squish)) %>%
mutate(across(where(is.character), ~replace(., . == "NA", NA))) %>%
mutate(across(where(is.character), ~na_if(.,""))) %>%
left_join(., read_rds(file = "../data/US_judges.rds") %>% select(judge_name, judge_id), by = join_by(judge_rapporteur_name == judge_name)) %>%
rename(judge_rapporteur_id = judge_id) %>%
relocate(judge_rapporteur_id, .after = judge_rapporteur_name)
remDr$close()
rD[["server"]]$stop()
return(metadata)
message("Done with scraping metadata")
}
metadata_new = get_metadata(US_IDs_new[150:200])
metadata_new = get_metadata(US_IDs_new[194])
US_IDs_new[194]
rD = rsDriver(browser="firefox", port=as.integer(sample(x = 3000:5000, 1)), verbose=F, chromever = NULL)
remDr = rD[["client"]]
html = remDr$getPageSource()[[1]] %>%
read_html()
html_metadata = html %>%
html_nodes(".recordCardTable") %>%
html_table()
View(metadata_new)
View(html_metadata)
output = html_metadata[[1]]$X2 %>% t() %>% as_tibble()
View(output)
colnames(output) = html_metadata[[1]]$X1
case_id = html %>%
html_elements(xpath = "/html/body/form/div[3]/table/tbody/tr[1]/td/table/tbody/tr[6]/td/table/tbody/tr[2]/td/table/tbody/tr[2]/td[2]") %>%
html_text2()
dissenting_judges = html %>%
html_elements(xpath = "/html/body/form/div[3]/table/tbody/tr[3]/td/div/table/tbody/tr[21]/td[2]") %>%
html_text2() %>%
str_split(pattern = "\n") %>%
map(~na_if(.," ")) %>%
map(.x = ., function(x) paste(word(x, 2), paste(word(x, 1), sep = "\\s")))
applicant = html %>%
html_elements(xpath = "/html/body/form/div[3]/table/tbody/tr[3]/td/div/table/tbody/tr[14]/td[2]") %>%
html_text2() %>%
str_split(pattern = "\n") %>%
map(~na_if(.," "))
concerned_body = html %>%
html_elements(xpath = "/html/body/form/div[3]/table/tbody/tr[3]/td/div/table/tbody/tr[15]/td[2]") %>%
html_text2() %>%
str_split(pattern = "\n") %>%
map(~na_if(.," "))
field_register = html %>%
html_elements(xpath = "/html/body/form/div[3]/table/tbody/tr[3]/td/div/table/tbody/tr[23]/td[2]") %>%
html_text2() %>%
str_split(pattern = "\n") %>%
map(~na_if(.," "))
subject_proceedings = html %>%
html_elements(xpath = "/html/body/form/div[3]/table/tbody/tr[3]/td/div/table/tbody/tr[22]/td[2]") %>%
html_text2() %>%
str_split(pattern = "\n") %>%
map(~na_if(.," "))
concerned_constitutional_acts = html %>%
html_elements(xpath = "/html/body/form/div[3]/table/tbody/tr[3]/td/div/table/tbody/tr[19]/td[2]/ul") %>%
html_text2() %>%
str_split(pattern = "\n") %>%
map(~na_if(.," "))
View(concerned_constitutional_acts)
concerned_acts = html %>%
html_elements(xpath = "/html/body/form/div[3]/table/tbody/tr[3]/td/div/table/tbody/tr[20]/td[2]/ul") %>%
html_text2() %>%
str_split(pattern = "\n") %>%
map(~na_if(.," "))
disputed_act = html %>%
html_elements(xpath = "/html/body/form/div[3]/table/tbody/tr[3]/td/div/table/tbody/tr[17]/td[2]") %>%
html_text2() %>%
str_split(pattern = "\n") %>%
map(~na_if(.," "))
View(disputed_act)
output$`Spisová značka` = case_id
output$`Odlišné stanovisko` = dissenting_judges
output$Navrhovatel = applicant
output$`Dotčený orgán` = concerned_body
output$`Věcný rejstřík` = field_register
output$`Předmět řízení` = subject_proceedings
output$`Dotčené ústavní zákony a mezinárodní smlouvy` = concerned_constitutional_acts
output$`Ostatní dotčené předpisy` = concerned_acts
output$`Napadený akt` = disputed_act
output %>%
select(-c(2,4,5,10,24)) %>%
rename(
doc_id = "Identifikátor evropské judikatury",
case_id = "Spisová značka",
popular_name = "Populární název",
date_decision = "Datum rozhodnutí",
date_submission = "Datum podání",
date_publication = "Datum vyhlášení",
type_decision = "Forma rozhodnutí",
type_proceedings = "Typ řízení",
importance = "Význam",
applicant = "Navrhovatel",
concerned_body = "Dotčený orgán",
judge_rapporteur_name = "Soudce zpravodaj",
disputed_act = "Napadený akt",
type_verdict = "Typ výroku",
concerned_constitutional_acts = "Dotčené ústavní zákony a mezinárodní smlouvy",
concerned_acts = "Ostatní dotčené předpisy",
dissenting_opinion = "Odlišné stanovisko",
subject_proceedings = "Předmět řízení",
field_register = "Věcný rejstřík",
note = "Poznámka",
url_address = "URL adresa"
) %>%
mutate(across(contains("date"), ~ as.Date(x = ., format = "%d. %m. %Y"))) %>%
mutate(formation = case_when(
grepl(":Pl." , doc_id) ~ "Plenum",
grepl(":1.US.", doc_id) ~ "First Chamber",
grepl(":2.US.", doc_id) ~ "Second Chamber",
grepl(":3.US.", doc_id) ~ "Third Chamber",
grepl(":4.US.", doc_id) ~ "Fourth Chamber"
),
length_proceeding = interval(date_submission, date_decision) %>% as.numeric('days'),
outcome = ifelse(grepl("vyhověno", type_verdict), "granted", "rejected"),
judge_rapporteur_name = paste0(word(judge_rapporteur_name, 2), " ", word(judge_rapporteur_name, 1)),
doc_id = make.unique(doc_id),
dissenting_opinion = map(.x = dissenting_opinion, ~na_if(.x, "NA NA"))) %>%
remove_rownames() %>%
mutate(across(where(is.character), str_squish)) %>%
mutate(across(where(is.character), ~replace(., . == "NA", NA))) %>%
mutate(across(where(is.character), ~na_if(.,""))) %>%
left_join(., read_rds(file = "../data/US_judges.rds") %>% select(judge_name, judge_id), by = join_by(judge_rapporteur_name == judge_name)) %>%
rename(judge_rapporteur_id = judge_id) %>%
relocate(judge_rapporteur_id, .after = judge_rapporteur_name)
US_IDs_new[195]
html = remDr$getPageSource()[[1]] %>%
read_html()
html_metadata = html %>%
html_nodes(".recordCardTable") %>%
html_table()
output = html_metadata[[1]]$X2 %>% t() %>% as_tibble()
colnames(output) = html_metadata[[1]]$X1
View(output)
case_id = html %>%
html_elements(xpath = "/html/body/form/div[3]/table/tbody/tr[1]/td/table/tbody/tr[6]/td/table/tbody/tr[2]/td/table/tbody/tr[2]/td[2]") %>%
html_text2()
dissenting_judges = html %>%
html_elements(xpath = "/html/body/form/div[3]/table/tbody/tr[3]/td/div/table/tbody/tr[21]/td[2]") %>%
html_text2() %>%
str_split(pattern = "\n") %>%
map(~na_if(.," ")) %>%
map(.x = ., function(x) paste(word(x, 2), paste(word(x, 1), sep = "\\s")))
applicant = html %>%
html_elements(xpath = "/html/body/form/div[3]/table/tbody/tr[3]/td/div/table/tbody/tr[14]/td[2]") %>%
html_text2() %>%
str_split(pattern = "\n") %>%
map(~na_if(.," "))
concerned_body = html %>%
html_elements(xpath = "/html/body/form/div[3]/table/tbody/tr[3]/td/div/table/tbody/tr[15]/td[2]") %>%
html_text2() %>%
str_split(pattern = "\n") %>%
map(~na_if(.," "))
field_register = html %>%
html_elements(xpath = "/html/body/form/div[3]/table/tbody/tr[3]/td/div/table/tbody/tr[23]/td[2]") %>%
html_text2() %>%
str_split(pattern = "\n") %>%
map(~na_if(.," "))
subject_proceedings = html %>%
html_elements(xpath = "/html/body/form/div[3]/table/tbody/tr[3]/td/div/table/tbody/tr[22]/td[2]") %>%
html_text2() %>%
str_split(pattern = "\n") %>%
map(~na_if(.," "))
html %>%
html_elements(xpath = "/html/body/form/div[3]/table/tbody/tr[3]/td/div/table/tbody/tr[19]/td[2]/ul") %>%
html_text2() %>%
str_split(pattern = "\n") %>%
map(~na_if(.," "))
concerned_constitutional_acts = html %>%
html_elements(xpath = "/html/body/form/div[3]/table/tbody/tr[3]/td/div/table/tbody/tr[19]/td[2]/ul") %>%
html_text2() %>%
str_split(pattern = "\n") %>%
map(~na_if(.," "))
html %>%
html_elements(xpath = "/html/body/form/div[3]/table/tbody/tr[3]/td/div/table/tbody/tr[20]/td[2]/ul") %>%
html_text2() %>%
str_split(pattern = "\n") %>%
map(~na_if(.," "))
concerned_acts = html %>%
html_elements(xpath = "/html/body/form/div[3]/table/tbody/tr[3]/td/div/table/tbody/tr[20]/td[2]/ul") %>%
html_text2() %>%
str_split(pattern = "\n") %>%
map(~na_if(.," "))
disputed_act = html %>%
html_elements(xpath = "/html/body/form/div[3]/table/tbody/tr[3]/td/div/table/tbody/tr[17]/td[2]") %>%
html_text2() %>%
str_split(pattern = "\n") %>%
map(~na_if(.," "))
output$`Spisová značka` = case_id
output$`Odlišné stanovisko` = dissenting_judges
output$Navrhovatel = applicant
output$`Dotčený orgán` = concerned_body
output$`Věcný rejstřík` = field_register
output$`Předmět řízení` = subject_proceedings
output$`Dotčené ústavní zákony a mezinárodní smlouvy` = concerned_constitutional_acts
output$`Ostatní dotčené předpisy` = concerned_acts
output$`Napadený akt` = disputed_act
source("scripts/WR_decisions_US.R")
#US
US_IDs_new = read_rds(file = "../data/US_IDs.rds")
metadata_new = get_metadata(US_IDs_new[50:100])
View(metadata_new)
metadata_new = get_metadata(US_IDs_new[85:95])
View(metadata_new)
metadata_new2 = get_metadata(US_IDs_new[50:100])
View(metadata_new2)
View(metadata_new)
US_IDs_new[95]
US_IDs_new[90]
US_IDs_new[89]
US_IDs_new[99]
rD = rsDriver(browser="firefox", port=as.integer(sample(x = 3000:5000, 1)), verbose=F, chromever = NULL)
remDr = rD[["client"]]
html = remDr$getPageSource()[[1]] %>%
read_html()
html_metadata = html %>%
html_nodes(".recordCardTable") %>%
html_table()
output = html_metadata[[1]]$X2 %>% t() %>% as_tibble()
colnames(output) = html_metadata[[1]]$X1
html %>%
html_elements(xpath = "/html/body/form/div[3]/table/tbody/tr[1]/td/table/tbody/tr[6]/td/table/tbody/tr[2]/td/table/tbody/tr[2]/td[2]") %>%
html_text2()
case_id = html %>%
html_elements(xpath = "/html/body/form/div[3]/table/tbody/tr[1]/td/table/tbody/tr[6]/td/table/tbody/tr[2]/td/table/tbody/tr[2]/td[2]") %>%
html_text2()
html %>%
html_elements(xpath = "/html/body/form/div[3]/table/tbody/tr[3]/td/div/table/tbody/tr[21]/td[2]") %>%
html_text2() %>%
str_split(pattern = "\n") %>%
map(~na_if(.," ")) %>%
map(.x = ., function(x) paste(word(x, 2), paste(word(x, 1), sep = "\\s")))
dissenting_judges = html %>%
html_elements(xpath = "/html/body/form/div[3]/table/tbody/tr[3]/td/div/table/tbody/tr[21]/td[2]") %>%
html_text2() %>%
str_split(pattern = "\n") %>%
map(~na_if(.," ")) %>%
map(.x = ., function(x) paste(word(x, 2), paste(word(x, 1), sep = "\\s")))
html %>%
html_elements(xpath = "/html/body/form/div[3]/table/tbody/tr[3]/td/div/table/tbody/tr[14]/td[2]") %>%
html_text2() %>%
str_split(pattern = "\n") %>%
map(~na_if(.," "))
applicant = html %>%
html_elements(xpath = "/html/body/form/div[3]/table/tbody/tr[3]/td/div/table/tbody/tr[14]/td[2]") %>%
html_text2() %>%
str_split(pattern = "\n") %>%
map(~na_if(.," "))
html %>%
html_elements(xpath = "/html/body/form/div[3]/table/tbody/tr[3]/td/div/table/tbody/tr[15]/td[2]") %>%
html_text2() %>%
str_split(pattern = "\n") %>%
map(~na_if(.," "))
concerned_body = html %>%
html_elements(xpath = "/html/body/form/div[3]/table/tbody/tr[3]/td/div/table/tbody/tr[15]/td[2]") %>%
html_text2() %>%
str_split(pattern = "\n") %>%
map(~na_if(.," "))
html %>%
html_elements(xpath = "/html/body/form/div[3]/table/tbody/tr[3]/td/div/table/tbody/tr[23]/td[2]") %>%
html_text2() %>%
str_split(pattern = "\n") %>%
map(~na_if(.," "))
field_register = html %>%
html_elements(xpath = "/html/body/form/div[3]/table/tbody/tr[3]/td/div/table/tbody/tr[23]/td[2]") %>%
html_text2() %>%
str_split(pattern = "\n") %>%
map(~na_if(.," "))
subject_proceedings = html %>%
html_elements(xpath = "/html/body/form/div[3]/table/tbody/tr[3]/td/div/table/tbody/tr[22]/td[2]") %>%
html_text2() %>%
str_split(pattern = "\n") %>%
map(~na_if(.," "))
html %>%
html_elements(xpath = "/html/body/form/div[3]/table/tbody/tr[3]/td/div/table/tbody/tr[19]/td[2]/ul") %>%
html_text2() %>%
str_split(pattern = "\n") %>%
map(~na_if(.," "))
concerned_constitutional_acts = html %>%
html_elements(xpath = "/html/body/form/div[3]/table/tbody/tr[3]/td/div/table/tbody/tr[19]/td[2]/ul") %>%
html_text2() %>%
str_split(pattern = "\n") %>%
map(~na_if(.," "))
is.empty(concerned_constitutional_acts)
is_empty(concerned_constitutional_acts)
concerned_constitutional_acts = html %>%
html_elements(xpath = "/html/body/form/div[3]/table/tbody/tr[3]/td/div/table/tbody/tr[19]/td[2]/ul") %>%
html_text2() %>%
str_split(pattern = "\n") %>%
map(~na_if(.," "))
if(is_empty(concerned_constitutional_acts)){concerned_constitutional_acts = NA}
concerned_acts = html %>%
html_elements(xpath = "/html/body/form/div[3]/table/tbody/tr[3]/td/div/table/tbody/tr[20]/td[2]/ul") %>%
html_text2() %>%
str_split(pattern = "\n") %>%
map(~na_if(.," "))
if(is_empty(concerned_acts)) concerned_acts = NA
View(concerned_body)
source("scripts/WR_decisions_US.R")
source("scripts/WR_decisions_NSS.R")
#US
US_IDs_new = read_rds(file = "../data/US_IDs.rds")
metadata_new2 = get_metadata(US_IDs_new[50:100])
View(metadata_new2)
source("scripts/WR_decisions_US.R")
metadata_new2 = get_metadata(US_IDs_new[50:100])
View(metadata_new2)
install.packages(c("bookdown", "bslib", "checkmate", "cpp11", "crosstalk", "curl", "data.table", "DiceDesign", "dplyr", "DT", "e1071", "fansi", "ggdist", "gmp", "gtools", "haven", "htmlwidgets", "httpuv", "ISOcodes", "jsonlite", "later", "lemon", "lifecycle", "lme4", "markdown", "Matrix", "MatrixModels", "matrixStats", "progress", "QuickJSR", "RcppArmadillo", "rjags", "rlang", "Rmpfr", "rprojroot", "sass", "scales", "shiny", "stringi", "stringr", "tarchetypes", "testthat", "tinytex", "topicmodels", "V8", "vctrs", "vroom", "xgboost", "xml2"))
