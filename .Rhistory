list[1] %>% html_elements('/h3')
list[1] %>% html_elements('//h3')
list[1] %>% html_elements('h3')
list[[1]] %>% html_elements('h3')
list[[1]] %>% html_elements('h3')
list[1]
h3 <- list[1] %>% html_elements('h3')
View(h3)
list[1] %>% html_elements('h3') %>% html_text2()
judges_list <- html %>% html_elements(xpath = '//div[@class="person-content"]')
judges_list[1] %>% html_elements('//div[@class="person-info') %>% html_text2() %>% str_extract("soudu od \\d.\\s*\\d.\\s*\\d{4}") %>% str_extract("\\d{4}")
judges_list[1] %>% html_elements('//div[@class="person-info') %>% html_text2()
judges_list[1] %>% html_elements('//div[@class="person-info]') %>% html_text2()
judges_list[1] %>% html_elements('//div[@class="person-info"]') %>% html_text2()
judges_list[1] %>% html_elements(xpath = '//div[@class="person-info"]') %>% html_text2()
judges_list[[1]] %>% html_elements(xpath = '//div[@class="person-info"]') %>% html_text2()
list[1] %>% html_elements(xpath = '//div[@class="person-info"]') %>% html_text2()
judges_list[1] %>% html_elements('h3') %>% html_text2() %>% str_extract("[A-ZŽČŠŘ][a-ž]+\\s[A-ZŽČŠŘ][a-ž]+")
list[1] %>% html_elements(xpath = '//div[@class="person-info"]')
judges_list[1]
judges_list[1] %>% html_element(xpath = '//div[@class="person-info"]') %>% html_text2()
judges_list[2] %>% html_element(xpath = '//div[@class="person-info"]') %>% html_text2()
judges_list[[1]] %>% html_elements(xpath = '//div[@class="person-info"]') %>% html_text2()
judges_list[1] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2()
judges_list[2] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2()
judges_list[2] %>% html_elements(xpath = '/div[@class="person-info"]') %>% html_text2()
judges_list[1] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2() %>% str_extract("do\\s*\\d.\\s*\\d.\\s*\\d{4}") %>% str_extract("\\d{4}"),
judges_list[1] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2() %>% str_extract("od\\s*\\d.\\s*\\d.\\s*\\d{4}") %>% str_extract("\\d{4}")
judges_list[1] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2() %>% str_extract("do\\s*\\d.\\s*\\d.\\s*\\d{4}") %>% str_extract("\\d{4}")
judges_list[1] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2() %>% str_extract("do\\s*\\d.\\s*\\d.\\s*\\d{4}")
judges_list[1] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2()
judges_list[1] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2() %>% str_extract("do\\s*\\d+.\\s*\\d+.\\s*\\d{4}") %>% str_extract("\\d{4}")
judges_list[1] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2() %>% str_extract("(soudcem|soudkyní)")
get_temporary_judges <- function(){
html <- "https://www.nssoud.cz/o-soudu/soudci/docasne-prideleni-soudci" %>% read_html()
judges_list <- html %>% html_elements(xpath = '//div[@class="person-content"]')
data <- foreach(i = seq_along(html_elements(html, xpath = 'div[@class="person-content"]')), .combine = "rbind") %do% {
output <- tibble(
"judge_name" = judges_list[i] %>% html_elements('h3') %>% html_text2() %>% str_extract("[A-ZŽČŠŘ][a-ž]+\\s[A-ZŽČŠŘ][a-ž]+"),
"yob" = judges_list[i] %>% html_elements('h3') %>% html_text2() %>% str_extract("\\d{4}"),
"start" = judges_list[i] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2() %>% str_extract("od\\s*\\d+.\\s*\\d+.\\s*\\d{4}") %>% str_extract("\\d{4}"),
"end" = judges_list[i] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2() %>% str_extract("do\\s*\\d+.\\s*\\d+.\\s*\\d{4}") %>% str_extract("\\d{4}"),
"gender" = judges_list[1i] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2() %>% str_extract("(soudcem|soudkyní)") %>% str_replace_all(c("soudcem" = "M", "soudkyní" = "F"))
)
return(output)
}
return(data)
}
NSS_temporary_judges <- get_temporary_judges()
get_temporary_judges <- function(){
html <- "https://www.nssoud.cz/o-soudu/soudci/docasne-prideleni-soudci" %>% read_html()
judges_list <- html %>% html_elements(xpath = '//div[@class="person-content"]')
data <- foreach(i = seq_along(html_elements(html, xpath = 'div[@class="person-content"]')), .combine = "rbind") %do% {
output <- tibble(
"judge_name" = judges_list[i] %>% html_elements('h3') %>% html_text2() %>% str_extract("[A-ZŽČŠŘ][a-ž]+\\s[A-ZŽČŠŘ][a-ž]+"),
"yob" = judges_list[i] %>% html_elements('h3') %>% html_text2() %>% str_extract("\\d{4}"),
"start" = judges_list[i] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2() %>% str_extract("od\\s*\\d+.\\s*\\d+.\\s*\\d{4}") %>% str_extract("\\d{4}"),
"end" = judges_list[i] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2() %>% str_extract("do\\s*\\d+.\\s*\\d+.\\s*\\d{4}") %>% str_extract("\\d{4}"),
"gender" = judges_list[1i] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2() %>% str_extract("(soudcem|soudkyní)") %>% str_replace_all(c("soudcem" = "M", "soudkyní" = "F"))
)
return(output)
}
return(data)
}
NSS_temporary_judges <- get_temporary_judges()
get_temporary_judges <- function(){
html <- "https://www.nssoud.cz/o-soudu/soudci/docasne-prideleni-soudci" %>% read_html()
judges_list <- html %>% html_elements(xpath = '//div[@class="person-content"]')
data <- foreach(i = seq_along(html_elements(html, xpath = 'div[@class="person-content"]')), .combine = "rbind") %do% {
output <- tibble(
"judge_name" = judges_list[i] %>% html_elements('h3') %>% html_text2() %>% str_extract("[A-ZŽČŠŘ][a-ž]+\\s[A-ZŽČŠŘ][a-ž]+"),
"yob" = judges_list[i] %>% html_elements('h3') %>% html_text2() %>% str_extract("\\d{4}"),
"start" = judges_list[i] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2() %>% str_extract("od\\s*\\d+.\\s*\\d+.\\s*\\d{4}") %>% str_extract("\\d{4}"),
"end" = judges_list[i] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2() %>% str_extract("do\\s*\\d+.\\s*\\d+.\\s*\\d{4}") %>% str_extract("\\d{4}"),
"gender" = judges_list[1i] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2() %>% str_extract("(soudcem|soudkyní)") %>% str_replace_all(c("soudcem" = "M", "soudkyní" = "F"))
)
return(output)
}
return(data)
}
NSS_temporary_judges <- get_temporary_judges()
View(list)
get_temporary_judges <- function(){
html <- "https://www.nssoud.cz/o-soudu/soudci/docasne-prideleni-soudci" %>% read_html()
judges_list <- html %>% html_elements(xpath = '//div[@class="person-content"]')
data <- foreach(i = seq_along(html_elements(html, xpath = 'div[@class="person-content"]')), .combine = "rbind") %do% {
output <- tibble(
"judge_name" = judges_list[i] %>% html_elements('h3') %>% html_text2() %>% str_extract("[A-ZŽČŠŘ][a-ž]+\\s[A-ZŽČŠŘ][a-ž]+"),
"yob" = judges_list[i] %>% html_elements('h3') %>% html_text2() %>% str_extract("\\d{4}"),
"start" = judges_list[i] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2() %>% str_extract("od\\s*\\d+.\\s*\\d+.\\s*\\d{4}") %>% str_extract("\\d{4}"),
"end" = judges_list[i] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2() %>% str_extract("do\\s*\\d+.\\s*\\d+.\\s*\\d{4}") %>% str_extract("\\d{4}"),
"gender" = judges_list[i] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2() %>% str_extract("(soudcem|soudkyní)") %>% str_replace_all(c("soudcem" = "M", "soudkyní" = "F"))
)
return(output)
}
return(data)
}
NSS_temporary_judges <- get_temporary_judges()
get_temporary_judges <- function(){
html <- "https://www.nssoud.cz/o-soudu/soudci/docasne-prideleni-soudci" %>% read_html()
judges_list <- html %>% html_elements(xpath = '//div[@class="person-content"]')
data <- foreach(i = seq_along(html_elements(html, xpath = 'div[@class="person-content"]')), .combine = "rbind") %do% {
output <- tibble(
"judge_name" = judges_list[i] %>% html_elements('h3') %>% html_text2() %>% str_extract("[A-ZŽČŠŘ][a-ž]+\\s[A-ZŽČŠŘ][a-ž]+"),
"yob" = judges_list[i] %>% html_elements('h3') %>% html_text2() %>% str_extract("\\d{4}"),
"start" = judges_list[i] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2() %>% str_extract("od\\s*\\d+.\\s*\\d+.\\s*\\d{4}") %>% str_extract("\\d{4}"),
"end" = judges_list[i] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2() %>% str_extract("do\\s*\\d+.\\s*\\d+.\\s*\\d{4}") %>% str_extract("\\d{4}"),
"gender" = judges_list[i] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2() %>% str_extract("(soudcem|soudkyní)") %>% str_replace_all(c("soudcem" = "M", "soudkyní" = "F"))
)
return(output)
}
return(data)
}
NSS_temporary_judges <- get_temporary_judges()
get_temporary_judges <- function(){
browser()
html <- "https://www.nssoud.cz/o-soudu/soudci/docasne-prideleni-soudci" %>% read_html()
judges_list <- html %>% html_elements(xpath = '//div[@class="person-content"]')
data <- foreach(i = seq_along(html_elements(html, xpath = 'div[@class="person-content"]')), .combine = "rbind") %do% {
output <- tibble(
"judge_name" = judges_list[i] %>% html_elements('h3') %>% html_text2() %>% str_extract("[A-ZŽČŠŘ][a-ž]+\\s[A-ZŽČŠŘ][a-ž]+"),
"yob" = judges_list[i] %>% html_elements('h3') %>% html_text2() %>% str_extract("\\d{4}"),
"start" = judges_list[i] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2() %>% str_extract("od\\s*\\d+.\\s*\\d+.\\s*\\d{4}") %>% str_extract("\\d{4}"),
"end" = judges_list[i] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2() %>% str_extract("do\\s*\\d+.\\s*\\d+.\\s*\\d{4}") %>% str_extract("\\d{4}"),
"gender" = judges_list[i] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2() %>% str_extract("(soudcem|soudkyní)") %>% str_replace_all(c("soudcem" = "M", "soudkyní" = "F"))
)
return(output)
}
return(data)
}
NSS_temporary_judges <- get_temporary_judges()
xfun::pkg_attach2("httr", "rvest", "progress", "foreach", "tidyverse", "xml2")
get_temporary_judges <- function(){
browser()
html <- "https://www.nssoud.cz/o-soudu/soudci/docasne-prideleni-soudci" %>% read_html()
judges_list <- html %>% html_elements(xpath = '//div[@class="person-content"]')
data <- foreach(i = seq_along(judges_list), .combine = "rbind") %do% {
output <- tibble(
"judge_name" = judges_list[i] %>% html_elements('h3') %>% html_text2() %>% str_extract("[A-ZŽČŠŘ][a-ž]+\\s[A-ZŽČŠŘ][a-ž]+"),
"yob" = judges_list[i] %>% html_elements('h3') %>% html_text2() %>% str_extract("\\d{4}"),
"start" = judges_list[i] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2() %>% str_extract("od\\s*\\d+.\\s*\\d+.\\s*\\d{4}") %>% str_extract("\\d{4}"),
"end" = judges_list[i] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2() %>% str_extract("do\\s*\\d+.\\s*\\d+.\\s*\\d{4}") %>% str_extract("\\d{4}"),
"gender" = judges_list[i] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2() %>% str_extract("(soudcem|soudkyní)") %>% str_replace_all(c("soudcem" = "M", "soudkyní" = "F"))
)
return(output)
}
return(data)
}
NSS_temporary_judges <- get_temporary_judges()
get_temporary_judges <- function(){
html <- "https://www.nssoud.cz/o-soudu/soudci/docasne-prideleni-soudci" %>% read_html()
judges_list <- html %>% html_elements(xpath = '//div[@class="person-content"]')
data <- foreach(i = seq_along(judges_list), .combine = "rbind") %do% {
output <- tibble(
"judge_name" = judges_list[i] %>% html_elements('h3') %>% html_text2() %>% str_extract("[A-ZŽČŠŘ][a-ž]+\\s[A-ZŽČŠŘ][a-ž]+"),
"yob" = judges_list[i] %>% html_elements('h3') %>% html_text2() %>% str_extract("\\d{4}"),
"start" = judges_list[i] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2() %>% str_extract("od\\s*\\d+.\\s*\\d+.\\s*\\d{4}") %>% str_extract("\\d{4}"),
"end" = judges_list[i] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2() %>% str_extract("do\\s*\\d+.\\s*\\d+.\\s*\\d{4}") %>% str_extract("\\d{4}"),
"gender" = judges_list[i] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2() %>% str_extract("(soudcem|soudkyní)") %>% str_replace_all(c("soudcem" = "M", "soudkyní" = "F"))
)
return(output)
}
return(data)
}
NSS_temporary_judges <- get_temporary_judges()
View(NSS_temporary_judges)
?replace
get_temporary_judges <- function(){
html <- "https://www.nssoud.cz/o-soudu/soudci/docasne-prideleni-soudci" %>% read_html()
judges_list <- html %>% html_elements(xpath = '//div[@class="person-content"]')
data <- foreach(i = seq_along(judges_list), .combine = "rbind") %do% {
output <- tibble(
"judge_name" = judges_list[i] %>% html_elements('h3') %>% html_text2() %>% str_extract("[A-ZŽČŠŘ][a-ž]+\\s[A-ZŽČŠŘ][a-ž]+"),
"yob" = judges_list[i] %>% html_elements('h3') %>% html_text2() %>% str_extract("\\d{4}"),
"start" = judges_list[i] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2() %>% str_extract("od\\s*\\d+.\\s*\\d+.\\s*\\d{4}") %>% str_extract("\\d{4}"),
"end" = judges_list[i] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2() %>% str_extract("do\\s*\\d+.\\s*\\d+.\\s*\\d{4}") %>% str_extract("\\d{4}"),
"gender" = judges_list[i] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2() %>% str_extract("(soudcem|soudkyní)") %>% str_replace_all(c("soudcem" = "M", "soudkyní" = "F"))
)
return(output)
}
data <- data %>% mutate(start = replace_na(end))
return(data)
}
NSS_temporary_judges <- get_temporary_judges()
get_temporary_judges <- function(){
html <- "https://www.nssoud.cz/o-soudu/soudci/docasne-prideleni-soudci" %>% read_html()
judges_list <- html %>% html_elements(xpath = '//div[@class="person-content"]')
data <- foreach(i = seq_along(judges_list), .combine = "rbind") %do% {
output <- tibble(
"judge_name" = judges_list[i] %>% html_elements('h3') %>% html_text2() %>% str_extract("[A-ZŽČŠŘ][a-ž]+\\s[A-ZŽČŠŘ][a-ž]+"),
"yob" = judges_list[i] %>% html_elements('h3') %>% html_text2() %>% str_extract("\\d{4}"),
"start" = judges_list[i] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2() %>% str_extract("od\\s*\\d+.\\s*\\d+.\\s*\\d{4}") %>% str_extract("\\d{4}"),
"end" = judges_list[i] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2() %>% str_extract("do\\s*\\d+.\\s*\\d+.\\s*\\d{4}") %>% str_extract("\\d{4}"),
"gender" = judges_list[i] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2() %>% str_extract("(soudcem|soudkyní)") %>% str_replace_all(c("soudcem" = "M", "soudkyní" = "F"))
)
return(output)
}
# data <- data %>% mutate(start = replace_na(end))
return(data)
}
NSS_temporary_judges <- get_temporary_judges()
View(NSS_temporary_judges)
get_temporary_judges <- function(){
html <- "https://www.nssoud.cz/o-soudu/soudci/docasne-prideleni-soudci" %>% read_html()
judges_list <- html %>% html_elements(xpath = '//div[@class="person-content"]')
data <- foreach(i = seq_along(judges_list), .combine = "rbind") %do% {
output <- tibble(
"judge_name" = judges_list[i] %>% html_elements('h3') %>% html_text2() %>% str_extract("[A-ZŽČŠŘ][a-ž]+\\s[A-ZŽČŠŘ][a-ž]+"),
"yob" = judges_list[i] %>% html_elements('h3') %>% html_text2() %>% str_extract("\\d{4}"),
"start" = judges_list[i] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2() %>% str_extract("od\\s*\\d+.\\s*\\d+.\\s*\\d{4}") %>% str_extract("\\d{4}"),
"end" = judges_list[i] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2() %>% str_extract("do\\s*\\d+.\\s*\\d+.\\s*\\d{4}") %>% str_extract("\\d{4}"),
"gender" = judges_list[i] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2() %>% str_extract("(soudcem|soudkyní)") %>% str_replace_all(c("soudcem" = "M", "soudkyní" = "F"))
)
return(output)
}
data$start <- data$start %>% replace_na(end)
return(data)
}
NSS_temporary_judges <- get_temporary_judges()
get_temporary_judges <- function(){
html <- "https://www.nssoud.cz/o-soudu/soudci/docasne-prideleni-soudci" %>% read_html()
judges_list <- html %>% html_elements(xpath = '//div[@class="person-content"]')
data <- foreach(i = seq_along(judges_list), .combine = "rbind") %do% {
output <- tibble(
"judge_name" = judges_list[i] %>% html_elements('h3') %>% html_text2() %>% str_extract("[A-ZŽČŠŘ][a-ž]+\\s[A-ZŽČŠŘ][a-ž]+"),
"yob" = judges_list[i] %>% html_elements('h3') %>% html_text2() %>% str_extract("\\d{4}"),
"start" = judges_list[i] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2() %>% str_extract("od\\s*\\d+.\\s*\\d+.\\s*\\d{4}") %>% str_extract("\\d{4}"),
"end" = judges_list[i] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2() %>% str_extract("do\\s*\\d+.\\s*\\d+.\\s*\\d{4}") %>% str_extract("\\d{4}"),
"gender" = judges_list[i] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2() %>% str_extract("(soudcem|soudkyní)") %>% str_replace_all(c("soudcem" = "M", "soudkyní" = "F"))
)
return(output)
}
data$start <- replace_na(data$start, data$end)
return(data)
}
NSS_temporary_judges <- get_temporary_judges()
?modify
?replace_na
get_temporary_judges <- function(){
html <- "https://www.nssoud.cz/o-soudu/soudci/docasne-prideleni-soudci" %>% read_html()
judges_list <- html %>% html_elements(xpath = '//div[@class="person-content"]')
data <- foreach(i = seq_along(judges_list), .combine = "rbind") %do% {
output <- tibble(
"judge_name" = judges_list[i] %>% html_elements('h3') %>% html_text2() %>% str_extract("[A-ZŽČŠŘ][a-ž]+\\s[A-ZŽČŠŘ][a-ž]+"),
"yob" = judges_list[i] %>% html_elements('h3') %>% html_text2() %>% str_extract("\\d{4}"),
"start" = judges_list[i] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2() %>% str_extract("od\\s*\\d+.\\s*\\d+.\\s*\\d{4}") %>% str_extract("\\d{4}"),
"end" = judges_list[i] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2() %>% str_extract("do\\s*\\d+.\\s*\\d+.\\s*\\d{4}") %>% str_extract("\\d{4}"),
"gender" = judges_list[i] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2() %>% str_extract("(soudcem|soudkyní)") %>% str_replace_all(c("soudcem" = "M", "soudkyní" = "F"))
)
return(output)
}
data$start <- data$start %>% modify(.f = replace_na, replace = data$end)
return(data)
}
NSS_temporary_judges <- get_temporary_judges()
?mutate_if
?is.na
?mutate_if
get_temporary_judges <- function(){
html <- "https://www.nssoud.cz/o-soudu/soudci/docasne-prideleni-soudci" %>% read_html()
judges_list <- html %>% html_elements(xpath = '//div[@class="person-content"]')
data <- foreach(i = seq_along(judges_list), .combine = "rbind") %do% {
output <- tibble(
"judge_name" = judges_list[i] %>% html_elements('h3') %>% html_text2() %>% str_extract("[A-ZŽČŠŘ][a-ž]+\\s[A-ZŽČŠŘ][a-ž]+"),
"yob" = judges_list[i] %>% html_elements('h3') %>% html_text2() %>% str_extract("\\d{4}"),
"start" = judges_list[i] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2() %>% str_extract("od\\s*\\d+.\\s*\\d+.\\s*\\d{4}") %>% str_extract("\\d{4}"),
"end" = judges_list[i] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2() %>% str_extract("do\\s*\\d+.\\s*\\d+.\\s*\\d{4}") %>% str_extract("\\d{4}"),
"gender" = judges_list[i] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2() %>% str_extract("(soudcem|soudkyní)") %>% str_replace_all(c("soudcem" = "M", "soudkyní" = "F"))
)
return(output)
}
data <- data %>% mutate_if(.predicate = is.na, start = end)
return(data)
}
NSS_temporary_judges <- get_temporary_judges()
?replace
get_temporary_judges <- function(){
html <- "https://www.nssoud.cz/o-soudu/soudci/docasne-prideleni-soudci" %>% read_html()
judges_list <- html %>% html_elements(xpath = '//div[@class="person-content"]')
data <- foreach(i = seq_along(judges_list), .combine = "rbind") %do% {
output <- tibble(
"judge_name" = judges_list[i] %>% html_elements('h3') %>% html_text2() %>% str_extract("[A-ZŽČŠŘ][a-ž]+\\s[A-ZŽČŠŘ][a-ž]+"),
"yob" = judges_list[i] %>% html_elements('h3') %>% html_text2() %>% str_extract("\\d{4}"),
"start" = judges_list[i] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2() %>% str_extract("od\\s*\\d+.\\s*\\d+.\\s*\\d{4}") %>% str_extract("\\d{4}"),
"end" = judges_list[i] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2() %>% str_extract("do\\s*\\d+.\\s*\\d+.\\s*\\d{4}") %>% str_extract("\\d{4}"),
"gender" = judges_list[i] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2() %>% str_extract("(soudcem|soudkyní)") %>% str_replace_all(c("soudcem" = "M", "soudkyní" = "F"))
)
return(output)
}
data <- data %>% mutate_if(.predicate = is.na, replace_na(end))
return(data)
}
NSS_temporary_judges <- get_temporary_judges()
get_temporary_judges <- function(){
html <- "https://www.nssoud.cz/o-soudu/soudci/docasne-prideleni-soudci" %>% read_html()
judges_list <- html %>% html_elements(xpath = '//div[@class="person-content"]')
data <- foreach(i = seq_along(judges_list), .combine = "rbind") %do% {
output <- tibble(
"judge_name" = judges_list[i] %>% html_elements('h3') %>% html_text2() %>% str_extract("[A-ZŽČŠŘ][a-ž]+\\s[A-ZŽČŠŘ][a-ž]+"),
"yob" = judges_list[i] %>% html_elements('h3') %>% html_text2() %>% str_extract("\\d{4}"),
"start" = judges_list[i] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2() %>% str_extract("od\\s*\\d+.\\s*\\d+.\\s*\\d{4}") %>% str_extract("\\d{4}"),
"end" = judges_list[i] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2() %>% str_extract("do\\s*\\d+.\\s*\\d+.\\s*\\d{4}") %>% str_extract("\\d{4}"),
"gender" = judges_list[i] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2() %>% str_extract("(soudcem|soudkyní)") %>% str_replace_all(c("soudcem" = "M", "soudkyní" = "F"))
)
return(output)
}
return(data)
}
NSS_temporary_judges <- get_temporary_judges()
View(NSS_temporary_judges)
?if_else
yeet = 1
get_temporary_judges <- function(){
html <- "https://www.nssoud.cz/o-soudu/soudci/docasne-prideleni-soudci" %>% read_html()
judges_list <- html %>% html_elements(xpath = '//div[@class="person-content"]')
data <- foreach(i = seq_along(judges_list), .combine = "rbind") %do% {
start = judges_list[i] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2() %>% str_extract("od\\s*\\d+.\\s*\\d+.\\s*\\d{4}") %>% str_extract("\\d{4}")
end = judges_list[i] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2() %>% str_extract("do\\s*\\d+.\\s*\\d+.\\s*\\d{4}") %>% str_extract("\\d{4}")
output <- tibble(
"judge_name" = judges_list[i] %>% html_elements('h3') %>% html_text2() %>% str_extract("[A-ZŽČŠŘ][a-ž]+\\s[A-ZŽČŠŘ][a-ž]+"),
"yob" = judges_list[i] %>% html_elements('h3') %>% html_text2() %>% str_extract("\\d{4}"),
"start" = if_else(is.na(start), end, start),
"end" = end,
"gender" = judges_list[i] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2() %>% str_extract("(soudcem|soudkyní)") %>% str_replace_all(c("soudcem" = "M", "soudkyní" = "F"))
)
return(output)
}
return(data)
}
NSS_temporary_judges <- get_temporary_judges()
View(NSS_temporary_judges)
NSS_judges = get_current_judges()
NSS_judges_former
NSS_temporary_judges
xfun::pkg_attach2("httr", "rvest", "progress", "foreach", "tidyverse", "xml2")
get_current_judges = function() {
html = "https://www.nssoud.cz/o-soudu/soudci/soucasni-soudci" %>% read_html()
NSS_judges = foreach(i = seq((html_elements(html, xpath = '//*[contains(@class, "people-list")]/div'))), .combine = "rbind") %do% {
output = tibble(
"judge_name" = html_elements(html, xpath = paste0('//*[contains(@class, "people-list")]/div[',i,']/div[2]/h3/a')) %>% html_text2() %>% str_extract("[A-ZŽČŠŘ][a-ž]+\\s[A-ZŽČŠŘ][a-ž]+"),
"yob" = html_elements(html, xpath = paste0('//*[contains(@class, "people-list")]/div[',i,']/div[2]/h3/span')) %>% html_text2() %>% str_extract("\\d{4}"),
"start" = html_elements(html, xpath = paste0('//*[contains(@class, "people-list")]/div[',i,']/div[2]/div[1]')) %>% html_text2() %>% str_extract("(soudcem|soudkyní) Nejvyššího správního soudu od roku \\d{4}") %>% str_extract("\\d{4}"),
"end" = NA,
"gender" = html_elements(html, xpath = paste0('//*[contains(@class, "people-list")]/div[',i,']/div[2]/div[1]')) %>% html_text2() %>% str_extract("(soudcem|soudkyní) Nejvyššího správního soudu od roku \\d{4}") %>% str_extract("(soudcem|soudkyní)") %>% str_replace_all(c("soudcem" = "M", "soudkyní" = "F")),
"temporary" = 0
)
return(output)
}
return(NSS_judges)
}
NSS_judges = get_current_judges()
NSS_judges
get_former_judges = function() {
html = "https://www.nssoud.cz/o-soudu/soudci/byvali-soudci" %>% read_html()
data = foreach(i = seq((html_elements(html, xpath = '//*[contains(@class, "people-list")]/div'))), .combine = "rbind") %do% {
output = tibble(
"judge_name" = html_elements(html, xpath = paste0('//*[contains(@class, "people-list")]/div[',i,']/div/h3')) %>% html_text2() %>% str_extract("[A-ZŽČŠŘ][a-ž]+\\s[A-ZŽČŠŘ][a-ž]+"),
"yob" = html_elements(html, xpath = paste0('//*[contains(@class, "people-list")]/div[',i,']/div/h3/span')) %>% html_text2() %>% str_extract("\\d{4}"),
"start" = html_elements(html, xpath = paste0('//*[contains(@class, "people-list")]/div[',i,']/div/div')) %>% html_text2() %>% str_extract("(soudcem|soudkyní) Nejvyššího správního soudu od roku \\d{4}") %>% str_extract("\\d{4}"),
"end" = html_elements(html, xpath = paste0('//*[contains(@class, "people-list")]/div[',i,']/div/div')) %>% html_text2() %>% str_extract("(funkce zanikla v roce \\d{4}|na funkci rezignoval[a-z]* v roce \\d{4})") %>% str_extract("\\d{4}"),
"gender" = html_elements(html, xpath = paste0('//*[contains(@class, "people-list")]/div[',i,']/div/div')) %>% html_text2() %>% str_extract("(soudcem|soudkyní)") %>% str_replace_all(c("soudcem" = "M", "soudkyní" = "F")),
"temporary" = 0
)
return(output)
}
return(data)
}
NSS_judges_former = get_former_judges()
NSS_judges_former
get_temporary_judges = function(){
html = "https://www.nssoud.cz/o-soudu/soudci/docasne-prideleni-soudci" %>% read_html()
judges_list = html %>% html_elements(xpath = '//div[@class="person-content"]')
data = foreach(i = seq_along(judges_list), .combine = "rbind") %do% {
start = judges_list[i] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2() %>% str_extract("od\\s*\\d+.\\s*\\d+.\\s*\\d{4}") %>% str_extract("\\d{4}")
end = judges_list[i] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2() %>% str_extract("do\\s*\\d+.\\s*\\d+.\\s*\\d{4}") %>% str_extract("\\d{4}")
output = tibble(
"judge_name" = judges_list[i] %>% html_elements('h3') %>% html_text2() %>% str_extract("[A-ZŽČŠŘ][a-ž]+\\s[A-ZŽČŠŘ][a-ž]+"),
"yob" = judges_list[i] %>% html_elements('h3') %>% html_text2() %>% str_extract("\\d{4}"),
"start" = if_else(is.na(start), end, start),
"end" = end,
"gender" = judges_list[i] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2() %>% str_extract("(soudcem|soudkyní)") %>% str_replace_all(c("soudcem" = "M", "soudkyní" = "F")),
"temporary" = 1
)
return(output)
}
return(data)
}
NSS_temporary_judges = get_temporary_judges()
NSS_temporary_judges
xfun::pkg_attach2("httr", "rvest", "progress", "foreach", "tidyverse", "xml2")
get_current_judges = function() {
html = "https://www.nssoud.cz/o-soudu/soudci/soucasni-soudci" %>% read_html()
NSS_judges = foreach(i = seq((html_elements(html, xpath = '//*[contains(@class, "people-list")]/div'))), .combine = "rbind") %do% {
output = tibble(
"judge_name" = html_elements(html, xpath = paste0('//*[contains(@class, "people-list")]/div[',i,']/div[2]/h3/a')) %>% html_text2() %>% str_extract("[A-ZŽČŠŘ][a-ž]+\\s[A-ZŽČŠŘ][a-ž]+"),
"yob" = html_elements(html, xpath = paste0('//*[contains(@class, "people-list")]/div[',i,']/div[2]/h3/span')) %>% html_text2() %>% str_extract("\\d{4}"),
"start" = html_elements(html, xpath = paste0('//*[contains(@class, "people-list")]/div[',i,']/div[2]/div[1]')) %>% html_text2() %>% str_extract("(soudcem|soudkyní) Nejvyššího správního soudu od roku \\d{4}") %>% str_extract("\\d{4}"),
"end" = NA,
"gender" = html_elements(html, xpath = paste0('//*[contains(@class, "people-list")]/div[',i,']/div[2]/div[1]')) %>% html_text2() %>% str_extract("(soudcem|soudkyní) Nejvyššího správního soudu od roku \\d{4}") %>% str_extract("(soudcem|soudkyní)") %>% str_replace_all(c("soudcem" = "M", "soudkyní" = "F")),
"temporary" = 0
)
return(output)
}
return(NSS_judges)
}
NSS_judges = get_current_judges()
NSS_judges
get_former_judges = function() {
html = "https://www.nssoud.cz/o-soudu/soudci/byvali-soudci" %>% read_html()
data = foreach(i = seq((html_elements(html, xpath = '//*[contains(@class, "people-list")]/div'))), .combine = "rbind") %do% {
output = tibble(
"judge_name" = html_elements(html, xpath = paste0('//*[contains(@class, "people-list")]/div[',i,']/div/h3')) %>% html_text2() %>% str_extract("[A-ZŽČŠŘ][a-ž]+\\s[A-ZŽČŠŘ][a-ž]+"),
"yob" = html_elements(html, xpath = paste0('//*[contains(@class, "people-list")]/div[',i,']/div/h3/span')) %>% html_text2() %>% str_extract("\\d{4}"),
"start" = html_elements(html, xpath = paste0('//*[contains(@class, "people-list")]/div[',i,']/div/div')) %>% html_text2() %>% str_extract("(soudcem|soudkyní) Nejvyššího správního soudu od roku \\d{4}") %>% str_extract("\\d{4}"),
"end" = html_elements(html, xpath = paste0('//*[contains(@class, "people-list")]/div[',i,']/div/div')) %>% html_text2() %>% str_extract("(funkce zanikla v roce \\d{4}|na funkci rezignoval[a-z]* v roce \\d{4})") %>% str_extract("\\d{4}"),
"gender" = html_elements(html, xpath = paste0('//*[contains(@class, "people-list")]/div[',i,']/div/div')) %>% html_text2() %>% str_extract("(soudcem|soudkyní)") %>% str_replace_all(c("soudcem" = "M", "soudkyní" = "F")),
"temporary" = 0
)
return(output)
}
return(data)
}
NSS_judges_former = get_former_judges()
NSS_judges_former
get_temporary_judges = function(){
html = "https://www.nssoud.cz/o-soudu/soudci/docasne-prideleni-soudci" %>% read_html()
judges_list = html %>% html_elements(xpath = '//div[@class="person-content"]')
data = foreach(i = seq_along(judges_list), .combine = "rbind") %do% {
start = judges_list[i] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2() %>% str_extract("od\\s*\\d+.\\s*\\d+.\\s*\\d{4}") %>% str_extract("\\d{4}")
end = judges_list[i] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2() %>% str_extract("do\\s*\\d+.\\s*\\d+.\\s*\\d{4}") %>% str_extract("\\d{4}")
output = tibble(
"judge_name" = judges_list[i] %>% html_elements('h3') %>% html_text2() %>% str_extract("[A-ZŽČŠŘ][a-ž]+\\s[A-ZŽČŠŘ][a-ž]+"),
"yob" = judges_list[i] %>% html_elements('h3') %>% html_text2() %>% str_extract("\\d{4}"),
"start" = if_else(is.na(start), end, start),
"end" = end,
"gender" = judges_list[i] %>% html_elements(xpath = 'div[@class="person-info"]') %>% html_text2() %>% str_extract("(soudcem|soudkyní)") %>% str_replace_all(c("soudcem" = "M", "soudkyní" = "F")),
"temporary" = 1
)
return(output)
}
return(data)
}
NSS_temporary_judges = get_temporary_judges()
NSS_temporary_judges
View(NSS_judges_former)
View(NSS_judges_former)
View(NSS_temporary_judges)
?rbind
NSS_judges = rbind(NSS_judges, NSS_judges_former)
NSS_judges = rbind(NSS_judges, NSS_judges_former)
View(NSS_judges)
NSS_judges = rbind(NSS_judges, NSS_temporary_judges)
View(NSS_judges)
save(NSS_judges, file = "data/NSS_judges.RData")
?saveRDS
saveRDS(NSS_judges, file = "data/NSS_judges.Rds")
saveRDS(NSS_judges, file = "data/NSS_judges.rds")
load("data/US_metadata.RData")
xfun::pkg_attach2("udpipe","tidyverse", "RMySQL", "lubridate", "utf8", "uchardet")
US_metadata
US_metadata <- US_metadata %>% mutate(~replace(., is_empty(), NA))
US_metadata <- US_metadata %>% mutate(~replace(., is_empty(.), NA))
View(US_metadata)
US_metadata <- US_metadata %>% mutate(~replace(., is_empty(.), NA))
US_metadata <- US_metadata %>% mutate_all(~replace(., is_empty(.), NA))
View(US_metadata)
US_metadata <- US_metadata %>% mutate_all(~replace(., . == "", NA))
View(US_metadata)
# Save data
saveRDS(US_metadata, file = "data/US_metadata.rds")
loadRDS("data/US_metadata.rds")
loadRDS("data/US_metadata.rds")
?saveRDS
readRDS("data/US_metadata.rds")
US_metadata = readRDS("data/US_metadata.rds")
load("data/US_judges.RData")
load("data/US_texts.RData")
# Load data
load("data/US_compositions.RData")
saveRDS(US_compositions, file = "data/US_compositions.rds")
load("data/US_judges.RData")
saveRDS(US_judges, file = "data/US_judges.rds")
saveRDS(US_judges, file = "data/US_judges.rds")
US_judges = readRDS("data/US_judges.rds")
load("data/US_dissents.RData")
saveRDS(US_dissents, file = "data/US_dissents.rds")
US_dissents = readRDS("data/US_dissents.rds")
US_compositions = readRDS("data/US_compositions.rds")
US_texts = readRDS("data/US_texts.rds")
load(data/US_texts.Rdata)
load(data/US_texts.RData)
load("data/US_texts.RData")
saveRDS(US_texts, file = "data/US_texts.rds")
US_compositions = readRDS("data/US_compositions.rds")
US_texts = readRDS("data/US_texts.rds")
US_metadata = readRDS("data/US_metadata.rds")
US_judges = readRDS("data/US_judges.rds")
US_dissents = readRDS("data/US_dissents.rds")
View(US_metadata)
View(US_texts)
load("data/US_citations.RData")
# Save data
saveRDS("data/US_citations.rds")
# Save data
saveRDS(file = US_citations, "data/US_citations.rds")
# Save data
saveRDS(file = US_citations, "data/US_citations.rds")
# Save data
saveRDS(US_citations, "data/US_citations.rds")
save.image(file = "data/US_dataset.RData")
load("data/US_dataset.RData")
install.packages(c("class", "KernSmooth", "MASS", "nnet"))
